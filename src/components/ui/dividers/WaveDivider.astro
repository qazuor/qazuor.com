---
/**
 * WaveDivider Component
 * @param {string} nextSectionColor - Color de la siguiente sección (formato hex: "#RRGGBB")
 * @param {string} upperSectionColor - Color de la sección superior (formato hex: "#RRGGBB")
 */

interface Props {
  nextSectionColor: string;
  upperSectionColor: string;
}

const { nextSectionColor, upperSectionColor } = Astro.props;

// Función para interpolar entre dos colores hexadecimales
function interpolateColor(color1: string, color2: string, factor: number): string {
  const hex1 = color1.replace('#', '');
  const hex2 = color2.replace('#', '');

  const r1 = Number.parseInt(hex1.substring(0, 2), 16);
  const g1 = Number.parseInt(hex1.substring(2, 4), 16);
  const b1 = Number.parseInt(hex1.substring(4, 6), 16);

  const r2 = Number.parseInt(hex2.substring(0, 2), 16);
  const g2 = Number.parseInt(hex2.substring(2, 4), 16);
  const b2 = Number.parseInt(hex2.substring(4, 6), 16);

  const r = Math.round(r1 + (r2 - r1) * factor);
  const g = Math.round(g1 + (g2 - g1) * factor);
  const b = Math.round(b1 + (b2 - b1) * factor);

  return `#${r.toString(16).padStart(2, '0')}${g.toString(16).padStart(2, '0')}${b.toString(16).padStart(2, '0')}`;
}

const wave1Color = interpolateColor(upperSectionColor, nextSectionColor, 0.2);
const wave2Color = interpolateColor(upperSectionColor, nextSectionColor, 0.4);
const wave3Color = interpolateColor(upperSectionColor, nextSectionColor, 0.6);
const wave4Color = interpolateColor(upperSectionColor, nextSectionColor, 0.8);
const wave5Color = nextSectionColor;
---

<div class="wave-divider">
  <svg class="relative block w-full h-40 md:h-48" viewBox="0 0 1200 120" preserveAspectRatio="none">
    <!-- Primera ola - más atrás -->
    <path
      d="M0,120 L0,0 C150,80 300,30 450,60 C600,90 750,40 900,70 C1050,100 1150,50 1200,0 L1200,120 Z"
      fill={wave1Color}
      fill-opacity="0.4"
    >
      <animate
        attributeName="d"
        dur="18s"
        repeatCount="indefinite"
        values="
          M0,120 L0,0 C150,90 300,20 450,70 C600,100 750,30 900,80 C1050,110 1150,40 1200,0 L1200,120 Z;
          M0,120 L0,40 C150,20 300,90 450,50 C600,30 750,100 900,60 C1050,40 1150,110 1200,40 L1200,120 Z;
          M0,120 L0,20 C150,100 300,40 450,80 C600,50 750,110 900,70 C1050,30 1150,90 1200,20 L1200,120 Z;
          M0,120 L0,0 C150,90 300,20 450,70 C600,100 750,30 900,80 C1050,110 1150,40 1200,0 L1200,120 Z
        "
      ></animate>
    </path>

    <!-- Segunda ola -->
    <path
      d="M0,120 L0,20 C200,70 400,30 600,60 C800,90 1000,40 1200,20 L1200,120 Z"
      fill={wave2Color}
      fill-opacity="0.5"
    >
      <animate
        attributeName="d"
        dur="15s"
        repeatCount="indefinite"
        values="
          M0,120 L0,20 C200,80 400,20 600,70 C800,100 1000,30 1200,20 L1200,120 Z;
          M0,120 L0,60 C200,30 400,80 600,40 C800,20 1000,90 1200,60 L1200,120 Z;
          M0,120 L0,40 C200,90 400,35 600,75 C800,50 1000,100 1200,40 L1200,120 Z;
          M0,120 L0,20 C200,80 400,20 600,70 C800,100 1000,30 1200,20 L1200,120 Z
        "
      ></animate>
    </path>

    <!-- Tercera ola - en medio -->
    <path
      d="M0,120 L0,35 C120,75 240,45 360,65 C480,85 600,50 720,70 C840,90 960,55 1080,75 C1150,85 1180,65 1200,35 L1200,120 Z"
      fill={wave3Color}
      fill-opacity="0.6"
    >
      <animate
        attributeName="d"
        dur="12s"
        repeatCount="indefinite"
        values="
          M0,120 L0,35 C120,85 240,35 360,75 C480,95 600,40 720,80 C840,100 960,45 1080,85 C1150,95 1180,55 1200,35 L1200,120 Z;
          M0,120 L0,70 C120,40 240,85 360,50 C480,35 600,90 720,55 C840,40 960,95 1080,60 C1150,45 1180,100 1200,70 L1200,120 Z;
          M0,120 L0,50 C120,90 240,50 360,80 C480,60 600,100 720,70 C840,50 960,110 1080,75 C1150,60 1180,100 1200,50 L1200,120 Z;
          M0,120 L0,35 C120,85 240,35 360,75 C480,95 600,40 720,80 C840,100 960,45 1080,85 C1150,95 1180,55 1200,35 L1200,120 Z
        "
      ></animate>
    </path>

    <!-- Cuarta ola -->
    <path
      d="M0,120 L0,50 C150,85 300,55 450,75 C600,95 750,60 900,80 C1050,100 1150,70 1200,50 L1200,120 Z"
      fill={wave4Color}
      fill-opacity="0.7"
    >
      <animate
        attributeName="d"
        dur="10s"
        repeatCount="indefinite"
        values="
          M0,120 L0,50 C150,95 300,45 450,85 C600,105 750,50 900,90 C1050,110 1150,60 1200,50 L1200,120 Z;
          M0,120 L0,85 C150,55 300,95 450,65 C600,50 750,100 900,70 C1050,55 1150,105 1200,85 L1200,120 Z;
          M0,120 L0,65 C150,100 300,60 450,90 C600,70 750,110 900,80 C1050,65 1150,115 1200,65 L1200,120 Z;
          M0,120 L0,50 C150,95 300,45 450,85 C600,105 750,50 900,90 C1050,110 1150,60 1200,50 L1200,120 Z
        "
      ></animate>
    </path>

    <!-- Quinta ola - al frente, color exacto de la sección siguiente -->
    <path
      d="M0,120 L0,60 C120,90 240,65 360,80 C480,95 600,70 720,85 C840,100 960,75 1080,90 C1150,100 1180,80 1200,60 L1200,120 Z"
      fill={wave5Color}
    >
      <animate
        attributeName="d"
        dur="8s"
        repeatCount="indefinite"
        values="
          M0,120 L0,60 C120,100 240,55 360,90 C480,105 600,60 720,95 C840,110 960,65 1080,100 C1150,110 1180,70 1200,60 L1200,120 Z;
          M0,120 L0,90 C120,60 240,100 360,70 C480,55 600,105 720,75 C840,60 960,110 1080,80 C1150,65 1180,105 1200,90 L1200,120 Z;
          M0,120 L0,75 C120,105 240,70 360,95 C480,80 600,115 720,90 C840,75 960,120 1080,95 C1150,80 1180,115 1200,75 L1200,120 Z;
          M0,120 L0,60 C120,100 240,55 360,90 C480,105 600,60 720,95 C840,110 960,65 1080,100 C1150,110 1180,70 1200,60 L1200,120 Z
        "
      ></animate>
    </path>
  </svg>
</div>

<style>
  .wave-divider {
    @apply absolute left-0 right-0 -bottom-1 z-10 overflow-hidden leading-none pointer-events-none;
  }
</style>
