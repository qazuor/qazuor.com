---
export interface Props {
    type?: 'info' | 'warning' | 'success' | 'error' | 'tip' | 'quote';
    title?: string;
}

const { type = 'info', title } = Astro.props;

const config = {
    info: {
        icon: '‚ÑπÔ∏è',
        defaultTitle: 'Info',
        typeClass: 'callout-info'
    },
    warning: {
        icon: '‚ö†Ô∏è',
        defaultTitle: 'Warning',
        typeClass: 'callout-warning'
    },
    success: {
        icon: '‚úÖ',
        defaultTitle: 'Success',
        typeClass: 'callout-success'
    },
    error: {
        icon: '‚ùå',
        defaultTitle: 'Error',
        typeClass: 'callout-error'
    },
    tip: {
        icon: 'üí°',
        defaultTitle: 'Tip',
        typeClass: 'callout-tip'
    },
    quote: {
        icon: 'üí¨',
        defaultTitle: '',
        typeClass: 'callout-quote'
    }
};

const { icon, defaultTitle, typeClass } = config[type];
const displayTitle = title || defaultTitle;
---

<aside
    class:list={[
        'callout my-6 rounded-r-lg border-l-4 p-4',
        typeClass,
        type === 'quote' && 'italic'
    ]}
    role="note"
>
    <div class="flex items-start gap-3">
        <span
            class="callout-icon flex-shrink-0 flex items-center justify-center w-8 h-8 rounded-lg text-lg"
            aria-hidden="true"
        >
            {icon}
        </span>
        <div class="flex-1 min-w-0">
            {displayTitle && (
                <p class="callout-title font-semibold text-sm mb-1">
                    {displayTitle}
                </p>
            )}
            <div class:list={[
                'callout-content text-foreground-secondary [&>p]:m-0 [&>p:not(:last-child)]:mb-2',
                type === 'quote' ? 'text-base' : 'text-sm'
            ]}>
                <slot />
            </div>
        </div>
    </div>
</aside>

<style>
    /* Callout type styles using semantic CSS variables */
    .callout-info {
        border-left-color: var(--color-ui-info-full);
        background-color: rgba(var(--color-ui-info), 0.1);
    }
    .callout-info .callout-title { color: var(--color-ui-info-full); }
    .callout-info .callout-icon { background-color: rgba(var(--color-ui-info), 0.2); }

    .callout-warning {
        border-left-color: var(--color-ui-warning-full);
        background-color: rgba(var(--color-ui-warning), 0.1);
    }
    .callout-warning .callout-title { color: var(--color-ui-warning-full); }
    .callout-warning .callout-icon { background-color: rgba(var(--color-ui-warning), 0.2); }

    .callout-success {
        border-left-color: var(--color-ui-success-full);
        background-color: rgba(var(--color-ui-success), 0.1);
    }
    .callout-success .callout-title { color: var(--color-ui-success-full); }
    .callout-success .callout-icon { background-color: rgba(var(--color-ui-success), 0.2); }

    .callout-error {
        border-left-color: var(--color-ui-error-full);
        background-color: rgba(var(--color-ui-error), 0.1);
    }
    .callout-error .callout-title { color: var(--color-ui-error-full); }
    .callout-error .callout-icon { background-color: rgba(var(--color-ui-error), 0.2); }

    .callout-tip {
        border-left-color: var(--color-ui-tip-full);
        background-color: rgba(var(--color-ui-tip), 0.1);
    }
    .callout-tip .callout-title { color: var(--color-ui-tip-full); }
    .callout-tip .callout-icon { background-color: rgba(var(--color-ui-tip), 0.2); }

    .callout-quote {
        border-left-color: var(--color-ui-quote-full);
        background-color: rgba(var(--color-ui-quote), 0.1);
    }
    .callout-quote .callout-title { color: var(--color-ui-quote-full); }
    .callout-quote .callout-icon { background-color: rgba(var(--color-ui-quote), 0.2); }
</style>

