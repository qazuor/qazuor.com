---
import ActionLink from './ActionLink.astro';

interface Props {
    email: string;
    text?: string;
    subject?: string;
    body?: string;
    variant?: 'primary' | 'secondary' | 'ghost';
    size?: 'sm' | 'md' | 'lg';
    className?: string;
    ariaLabel?: string;
}

const {
    email,
    text = 'Email Me',
    subject,
    body,
    variant = 'primary',
    size = 'md',
    className = '',
    ariaLabel = 'Send me an email'
} = Astro.props;

// Construct mailto URL
let href = `mailto:${email}`;
const params: string[] = [];

if (subject) {
    params.push(`subject=${encodeURIComponent(subject)}`);
}

if (body) {
    params.push(`body=${encodeURIComponent(body)}`);
}

if (params.length > 0) {
    href += `?${params.join('&')}`;
}
---

<ActionLink href={href} variant={variant} size={size} className={className} ariaLabel={ariaLabel}>
    {text}
</ActionLink>
