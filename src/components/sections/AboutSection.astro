---
import Timeline from '@/components/interactive/Timeline';
import AnimatedGradientBackground from '@/components/ui/AnimatedGradientBackground.astro';
import GetInTouchLink from '@/components/ui/GetInTouchLink.astro';
import ProfileCodeBlock from '@/components/ui/ProfileCodeBlock.astro';
import SecondaryTitle from '@/components/ui/SecondaryTitle.astro';
import SectionTitle from '@/components/ui/SectionTitle.astro';
import TimelineIconSprite from '@/components/ui/TimelineIconSprite.astro';

interface Props {
    primaryColor?: string;
    lang?: 'en' | 'es';
    translations?: {
        title: string;
        subtitle: string;
        storyTitle: string;
        storyParagraph1: string;
        storyParagraph2: string;
        storyParagraph3: string;
        storySummary: string;
        ctaButton: string;
        connect: string;
        workTogether: string;
        timeline: {
            beginning: {
                title: string;
                description: string;
            };
            present: {
                description: string;
            };
        };
    };
}

const {
    primaryColor = '#6366f1',
    lang = 'en',
    translations = {
        title: 'About Me',
        subtitle: 'Get to know me through code',
        storyTitle: 'My Story',
        storyParagraph1: '',
        storyParagraph2: '',
        storyParagraph3: '',
        storySummary: '',
        ctaButton: "Let's Work Together",
        connect: "Let's build something amazing together!",
        workTogether: "Let's Work Together",
        timeline: {
            beginning: {
                title: 'Beginning',
                description: 'My journey started with curiosity and passion for technology.'
            },
            present: {
                description: 'Today, I continue to build and innovate with modern technologies.'
            }
        }
    }
} = Astro.props;
---

<section class="relative section about-section overflow-hidden" id="about" style={`background-color: ${primaryColor}`}>
    <!-- Timeline Icon Sprite -->
    <TimelineIconSprite />

    <!-- Animated Gradient Background -->
    <AnimatedGradientBackground />

    <div class="container-custom">
        <!-- Section Title -->
        <div class="max-w-6xl mx-auto mb-16">
            <SectionTitle title={translations.title} subtitle={translations.subtitle} />

            <!-- Two Column Layout -->
            <div class="grid md:grid-cols-2 gap-8 lg:gap-12 items-start mt-12">
                <!-- Left Column - Code Block -->
                <div class="order-2 md:order-1">
                    <ProfileCodeBlock lang={lang} className="max-w-none" />
                </div>

                <!-- Right Column - Text Content -->
                <div class="order-1 md:order-2 space-y-6">
                    <div class="prose prose-lg max-w-none">
                        <SecondaryTitle text={translations.storyTitle} variant="story" size="lg" className="mb-6" />

                        <div class="text-foreground-secondary leading-relaxed space-y-4">
                            <p set:html={translations.storyParagraph1} />
                            <p set:html={translations.storyParagraph2} />
                            <p set:html={translations.storyParagraph3} />
                            <p class="text-foreground font-medium" set:html={translations.storySummary} />
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Timeline Section - Beginning text (Desktop only, mobile includes it in timeline) -->
        <div class="hidden lg:block text-center mb-12">
            <SecondaryTitle text={translations.timeline.beginning.title} variant="story" size="lg" className="mb-4" />
            <p
                class="text-foreground-secondary text-lg max-w-2xl mx-auto"
                set:html={translations.timeline.beginning.description}
            />
        </div>

        <Timeline
            lang={lang}
            translations={{
                timeline: translations.timeline,
                workTogether: translations.workTogether
            }}
            client:load
        />

        <!-- CTA Section - Desktop only (mobile includes it in timeline) -->
        <div class="hidden lg:block text-center mt-16 space-y-6">
            <p
                class="text-foreground-secondary text-lg max-w-2xl mx-auto"
                set:html={translations.timeline.present.description}
            />
            <GetInTouchLink
                text={translations.workTogether}
                variant="primary"
                size="md"
                className="shadow-glow-primary"
            />
        </div>
    </div>
</section>
