---
import SkillsRadarGrid from '@/components/interactive/SkillsRadarGrid.astro';
import AnimatedGradientBackground from '@/components/ui/AnimatedGradientBackground.astro';
import SectionTitle from '@/components/ui/SectionTitle.astro';
import { skillsData } from '@/data';
// Import tech icons
import AstroIcon from '@/icons/tech/astro.svg?raw';
import CanvaIcon from '@/icons/tech/canva.svg?raw';
import ClaudeCodeIcon from '@/icons/tech/claudecode.svg?raw';
import CoreldrawIcon from '@/icons/tech/coreldraw.svg?raw';
import Css3Icon from '@/icons/tech/css3.svg?raw';
import DrizzleIcon from '@/icons/tech/drizzle.svg?raw';
import EnglishIcon from '@/icons/tech/english.svg?raw';
import GitIcon from '@/icons/tech/git.svg?raw';
import GithubIcon from '@/icons/tech/github.svg?raw';
import HonoIcon from '@/icons/tech/hono.svg?raw';
import Html5Icon from '@/icons/tech/html5.svg?raw';
import JavascriptIcon from '@/icons/tech/javascript.svg?raw';
import NodejsIcon from '@/icons/tech/nodejs.svg?raw';
import PhotoshopIcon from '@/icons/tech/photoshop.svg?raw';
import PostgresqlIcon from '@/icons/tech/postgresql.svg?raw';
import ReactIcon from '@/icons/tech/react.svg?raw';
import RestApiIcon from '@/icons/tech/restapi.svg?raw';
import SpanishIcon from '@/icons/tech/spanish.svg?raw';
import TailwindIcon from '@/icons/tech/tailwind.svg?raw';
import TanstackIcon from '@/icons/tech/tanstack.svg?raw';
import TypescriptIcon from '@/icons/tech/typescript.svg?raw';
import UsaIcon from '@/icons/tech/usa.svg?raw';
import WordpressIcon from '@/icons/tech/wordpress.svg?raw';
import ZodIcon from '@/icons/tech/zod.svg?raw';
// Import UI icons (for soft skills and placeholders)
import ArrowRightIcon from '@/icons/ui/arrow-right.svg?raw';
import ArrowUpIcon from '@/icons/ui/arrow-up.svg?raw';
import ChatBubbleIcon from '@/icons/ui/chat-bubble.svg?raw';
import CheckCircleIcon from '@/icons/ui/check-circle.svg?raw';
import ClockIcon from '@/icons/ui/clock.svg?raw';
import DocumentEmptyIcon from '@/icons/ui/document-empty.svg?raw';
import HomeIcon from '@/icons/ui/home.svg?raw';
import SearchIcon from '@/icons/ui/search.svg?raw';
import SunIcon from '@/icons/ui/sun.svg?raw';
import XCircleIcon from '@/icons/ui/x-circle.svg?raw';

interface Props {
    primaryColor?: string;
    translations?: {
        title: string;
        subtitle: string;
        description: string;
        categoryTitles: {
            devHardSkills: string;
            otherSkills: string;
            softSkills: string;
        };
        skillItems?: Record<string, string>; // For soft skills translations
        skillDescriptions?: Record<string, string>; // For skill descriptions translations
        languages?: {
            title: string;
            native: string;
            writtenOnly: string;
        };
    };
}

const {
    primaryColor = '#4f46e5',
    translations = {
        title: 'Skills',
        subtitle: 'Technologies I work with',
        description:
            "Here's a look at my skill set. The tech world changes every moment and that's what makes it exciting! I constantly keep my knowledge up to date and love exploring new technologies to keep growing.",
        categoryTitles: {
            devHardSkills: 'Dev Hard Skills',
            otherSkills: 'Other Skills',
            softSkills: 'Soft Skills'
        }
    }
} = Astro.props;

// Icon map
const iconMap: Record<string, string> = {
    // Tech icons
    javascript: JavascriptIcon,
    typescript: TypescriptIcon,
    nodejs: NodejsIcon,
    drizzle: DrizzleIcon,
    postgresql: PostgresqlIcon,
    react: ReactIcon,
    astro: AstroIcon,
    tanstack: TanstackIcon,
    tailwind: TailwindIcon,
    css3: Css3Icon,
    html5: Html5Icon,
    hono: HonoIcon,
    restapi: RestApiIcon,
    zod: ZodIcon,
    git: GitIcon,
    github: GithubIcon,
    claudecode: ClaudeCodeIcon,
    english: EnglishIcon,
    spanish: SpanishIcon,
    coreldraw: CoreldrawIcon,
    photoshop: PhotoshopIcon,
    canva: CanvaIcon,
    wordpress: WordpressIcon,
    // UI icons (soft skills placeholders)
    'arrow-right': ArrowRightIcon,
    'arrow-up': ArrowUpIcon,
    'chat-bubble': ChatBubbleIcon,
    'check-circle': CheckCircleIcon,
    clock: ClockIcon,
    'document-empty': DocumentEmptyIcon,
    home: HomeIcon,
    search: SearchIcon,
    sun: SunIcon,
    'x-circle': XCircleIcon
};

// Map data with translated titles and icons
const categories = skillsData.map((category) => ({
    id: category.id,
    title: translations.categoryTitles?.[category.id] || category.id,
    skills: category.skills.map((skill) => ({
        // Use translation for soft skills and other skills, keep original name for dev hard skills
        name:
            (category.id === 'softSkills' || category.id === 'otherSkills') && translations.skillItems?.[skill.name]
                ? translations.skillItems[skill.name]
                : skill.name,
        value: skill.value,
        color: skill.color,
        icon: iconMap[skill.icon] || '',
        // Include translated description if available
        description:
            skill.description && translations.skillDescriptions?.[skill.description]
                ? translations.skillDescriptions[skill.description]
                : undefined
    }))
}));
---

<section
    class="relative section skills-section overflow-hidden"
    id="skills"
    style={`background-color: ${primaryColor}`}
>
    <!-- Animated Gradient Background -->
    <AnimatedGradientBackground />

    <div class="container-custom">
        <div class="max-w-7xl mx-auto">
            <!-- Section Title (only title and subtitle, no description) -->
            <SectionTitle
                title={translations.title}
                subtitle={translations.subtitle}
                subtitleClassName="mb-12"
                className="max-w-3xl mx-auto"
            />

            <!-- Skills Radar Grid with description -->
            <SkillsRadarGrid
                categories={categories}
                description={translations.description}
                languageIcons={{ spanish: SpanishIcon, english: UsaIcon }}
                languageTranslations={translations.languages}
            />
        </div>
    </div>
</section>

<style>
    .skills-section {
        min-height: 100vh;
        display: flex;
        align-items: center;
        padding: 4rem 0 13rem 0;
    }

    @media (max-width: 768px) {
        .skills-section {
            padding: 3rem 0;
        }
    }
</style>
