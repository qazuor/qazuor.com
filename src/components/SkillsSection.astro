---
import { skillsData } from '../data';
import AstroIcon from '../icons/tech/astro.svg?raw';
import DockerIcon from '../icons/tech/docker.svg?raw';
import FigmaIcon from '../icons/tech/figma.svg?raw';
import GitIcon from '../icons/tech/git.svg?raw';
import NodeJSIcon from '../icons/tech/nodejs.svg?raw';
import ReactIcon from '../icons/tech/react.svg?raw';
import TailwindIcon from '../icons/tech/tailwind.svg?raw';
import TypeScriptIcon from '../icons/tech/typescript.svg?raw';

interface SkillCategory {
  title: string;
  skills: Array<{
    name: string;
    icon: string;
    color: string;
  }>;
}

interface Props {
  translations?: {
    title: string;
    subtitle: string;
    categoryTitles?: {
      frontend?: string;
      backend?: string;
      tools?: string;
    };
  };
}

const {
  translations = {
    title: 'Tech Stack',
    subtitle: 'Technologies I work with',
    categoryTitles: {
      frontend: 'Frontend',
      backend: 'Backend',
      tools: 'Tools & Others',
    },
  },
} = Astro.props;

// Map data with translated titles
const categories: SkillCategory[] = skillsData.map((category) => ({
  title:
    translations.categoryTitles?.[category.id as keyof typeof translations.categoryTitles] ||
    category.id,
  skills: category.skills,
}));

const icons: Record<string, string> = {
  react: ReactIcon,
  typescript: TypeScriptIcon,
  nodejs: NodeJSIcon,
  astro: AstroIcon,
  tailwind: TailwindIcon,
  git: GitIcon,
  figma: FigmaIcon,
  docker: DockerIcon,
};
---

<section class="section bg-background-secondary" id="skills">
  <div class="container-custom">
    <div class="max-w-6xl mx-auto">
      <!-- Section Title -->
      <div class="mb-16 text-center">
        <h2 class="text-3xl md:text-4xl font-bold mb-4">
          <span class="gradient-text">{translations.title}</span>
        </h2>
        <p class="text-foreground-secondary text-lg">{translations.subtitle}</p>
      </div>

      <!-- Skills Grid -->
      <div class="space-y-12">
        {
          categories.map((category) => (
            <div class="skill-category">
              <h3 class="text-xl font-semibold mb-6 text-foreground">{category.title}</h3>
              <div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6">
                {category.skills.map((skill) => (
                  <div class="skill-card group card-hover text-center p-6 transition-all duration-300">
                    <div
                      class="w-16 h-16 mx-auto mb-4 transition-all duration-300 grayscale group-hover:grayscale-0"
                      style={`color: ${skill.color}`}
                      set:html={icons[skill.icon as keyof typeof icons]}
                    />
                    <p class="text-sm font-medium text-foreground group-hover:text-primary transition-colors duration-300">
                      {skill.name}
                    </p>
                  </div>
                ))}
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </div>
</section>
