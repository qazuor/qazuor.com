---
import DiagonalDivider from '@/components/ui/dividers/DiagonalDivider.astro';
import { sectionsColors } from '@/data';
import { defaultLang } from '@/i18n/ui';
import { getTranslations } from '@/i18n/utils';
import BaseLayout from '@/layouts/BaseLayout.astro';

// For 404 pages, we can't reliably detect the language from the URL
// since the URL doesn't exist. We'll use the default language
// but also try to detect from the URL path if possible.
const urlPath = Astro.url.pathname;
const pathLang = urlPath.split('/')[1];
const lang = pathLang === 'es' ? 'es' : defaultLang;
const t = getTranslations(lang);

const homeUrl = `/${lang}/`;
const blogUrl = `/${lang}/blog`;
const projectsUrl = `/${lang}/projects`;
const servicesUrl = `/${lang}/services`;
---

<BaseLayout
    title={t('notFound.title')}
    description={t('notFound.description')}
    noindex={true}
    noBreadcrumbs={true}
>
    <div class="relative">
        <section
            class="not-found-section relative min-h-[80vh] flex items-center justify-center"
            style={`background-color: ${sectionsColors.hero}`}
        >
            <!-- Animated Gradient Background -->
            <div class="gradient-bg">
                <div class="gradient-orb gradient-orb-1"></div>
                <div class="gradient-orb gradient-orb-2"></div>
                <div class="gradient-orb gradient-orb-3"></div>
            </div>

            <!-- Content -->
            <div class="container mx-auto px-4 py-16 text-center relative z-10">
                <!-- 404 Code -->
                <div class="relative mb-8">
                    <h1
                        class="text-[10rem] sm:text-[14rem] md:text-[18rem] font-bold leading-none tracking-tighter select-none text-foreground/10"
                        aria-hidden="true"
                    >
                        404
                    </h1>
                </div>

                <!-- Heading -->
                <h2 class="text-2xl sm:text-3xl md:text-4xl font-bold text-foreground mb-4">
                    {t('notFound.heading')}
                </h2>

                <!-- Description -->
                <p class="text-lg text-muted-foreground max-w-md mx-auto mb-8">
                    {t('notFound.description')}
                </p>

                <!-- Back Home Button -->
                <a
                    href={homeUrl}
                    class="inline-flex items-center gap-2 px-8 py-4 bg-primary text-primary-foreground font-semibold rounded-xl hover:bg-primary/90 transition-all duration-300 shadow-lg hover:shadow-xl hover:shadow-primary/20 hover:-translate-y-0.5"
                >
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        class="h-5 w-5"
                        viewBox="0 0 20 20"
                        fill="currentColor"
                    >
                        <path
                            fill-rule="evenodd"
                            d="M9.707 14.707a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 1.414L7.414 9H15a1 1 0 110 2H7.414l2.293 2.293a1 1 0 010 1.414z"
                            clip-rule="evenodd"
                        />
                    </svg>
                    {t('notFound.backHome')}
                </a>

                <!-- Search hint -->
                <p class="mt-6 text-sm text-muted-foreground/70">
                    {t('notFound.searchHint')}
                </p>

                <!-- Quick Links -->
                <div class="mt-12 pt-8 border-t border-border/50">
                    <p class="text-sm text-muted-foreground mb-4">
                        {t('notFound.suggestions.title')}
                    </p>
                    <nav class="flex flex-wrap justify-center gap-4">
                        <a
                            href={homeUrl}
                            class="px-4 py-2 text-sm font-medium text-foreground/80 hover:text-primary transition-colors"
                        >
                            {t('notFound.suggestions.home')}
                        </a>
                        <a
                            href={blogUrl}
                            class="px-4 py-2 text-sm font-medium text-foreground/80 hover:text-primary transition-colors"
                        >
                            {t('notFound.suggestions.blog')}
                        </a>
                        <a
                            href={projectsUrl}
                            class="px-4 py-2 text-sm font-medium text-foreground/80 hover:text-primary transition-colors"
                        >
                            {t('notFound.suggestions.projects')}
                        </a>
                        <a
                            href={servicesUrl}
                            class="px-4 py-2 text-sm font-medium text-foreground/80 hover:text-primary transition-colors"
                        >
                            {t('notFound.suggestions.services')}
                        </a>
                        <a
                            href={`${homeUrl}#contact`}
                            class="px-4 py-2 text-sm font-medium text-foreground/80 hover:text-primary transition-colors"
                        >
                            {t('notFound.suggestions.contact')}
                        </a>
                    </nav>
                </div>
            </div>
        </section>

        <!-- Divider before footer -->
        <DiagonalDivider direction="left" transition="contact-to-footer" />
    </div>
</BaseLayout>

<style>
    .not-found-section {
        overflow: hidden;
    }

    /* Animated gradient background container */
    .gradient-bg {
        position: absolute;
        inset: 0;
        overflow: hidden;
        z-index: 0;
    }

    /* Floating gradient orbs */
    .gradient-orb {
        position: absolute;
        border-radius: 50%;
        filter: blur(100px);
        animation: float 20s ease-in-out infinite;
    }

    .gradient-orb-1 {
        width: 70vw;
        height: 70vw;
        max-width: 800px;
        max-height: 800px;
        background: radial-gradient(circle, hsl(var(--primary) / 0.4) 0%, transparent 70%);
        top: -20%;
        left: -10%;
        animation-delay: 0s;
    }

    .gradient-orb-2 {
        width: 60vw;
        height: 60vw;
        max-width: 700px;
        max-height: 700px;
        background: radial-gradient(circle, hsl(var(--secondary) / 0.35) 0%, transparent 70%);
        top: 40%;
        right: -15%;
        animation-delay: -7s;
        animation-duration: 25s;
    }

    .gradient-orb-3 {
        width: 50vw;
        height: 50vw;
        max-width: 600px;
        max-height: 600px;
        background: radial-gradient(circle, hsl(var(--accent) / 0.35) 0%, transparent 70%);
        bottom: -15%;
        left: 25%;
        animation-delay: -14s;
        animation-duration: 22s;
    }

    @keyframes float {
        0%, 100% {
            transform: translate(0, 0) scale(1);
        }
        25% {
            transform: translate(40px, -40px) scale(1.08);
        }
        50% {
            transform: translate(-30px, 30px) scale(0.92);
        }
        75% {
            transform: translate(-40px, -30px) scale(1.04);
        }
    }

    /* Dark mode - more visible gradients */
    :global(.dark) .gradient-orb-1 {
        background: radial-gradient(circle, hsl(var(--primary) / 0.5) 0%, transparent 70%);
    }

    :global(.dark) .gradient-orb-2 {
        background: radial-gradient(circle, hsl(var(--secondary) / 0.45) 0%, transparent 70%);
    }

    :global(.dark) .gradient-orb-3 {
        background: radial-gradient(circle, hsl(var(--accent) / 0.45) 0%, transparent 70%);
    }
</style>
