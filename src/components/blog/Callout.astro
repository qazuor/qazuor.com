---
export interface Props {
    type?: 'info' | 'warning' | 'success' | 'error' | 'tip' | 'quote';
    title?: string;
}

const { type = 'info', title } = Astro.props;

const config = {
    info: {
        icon: '‚ÑπÔ∏è',
        defaultTitle: 'Info',
        borderColor: 'border-l-blue-500',
        bgColor: 'bg-blue-500/10',
        titleColor: 'text-blue-400',
        iconBg: 'bg-blue-500/20'
    },
    warning: {
        icon: '‚ö†Ô∏è',
        defaultTitle: 'Warning',
        borderColor: 'border-l-amber-500',
        bgColor: 'bg-amber-500/10',
        titleColor: 'text-amber-400',
        iconBg: 'bg-amber-500/20'
    },
    success: {
        icon: '‚úÖ',
        defaultTitle: 'Success',
        borderColor: 'border-l-emerald-500',
        bgColor: 'bg-emerald-500/10',
        titleColor: 'text-emerald-400',
        iconBg: 'bg-emerald-500/20'
    },
    error: {
        icon: '‚ùå',
        defaultTitle: 'Error',
        borderColor: 'border-l-red-500',
        bgColor: 'bg-red-500/10',
        titleColor: 'text-red-400',
        iconBg: 'bg-red-500/20'
    },
    tip: {
        icon: 'üí°',
        defaultTitle: 'Tip',
        borderColor: 'border-l-purple-500',
        bgColor: 'bg-purple-500/10',
        titleColor: 'text-purple-400',
        iconBg: 'bg-purple-500/20'
    },
    quote: {
        icon: 'üí¨',
        defaultTitle: '',
        borderColor: 'border-l-cyan-500',
        bgColor: 'bg-cyan-500/10',
        titleColor: 'text-cyan-400',
        iconBg: 'bg-cyan-500/20'
    }
};

const { icon, defaultTitle, borderColor, bgColor, titleColor, iconBg } = config[type];
const displayTitle = title || defaultTitle;
---

<aside
    class:list={[
        'callout my-6 rounded-r-lg border-l-4 p-4',
        borderColor,
        bgColor,
        type === 'quote' && 'italic'
    ]}
    role="note"
>
    <div class="flex items-start gap-3">
        <span
            class:list={[
                'flex-shrink-0 flex items-center justify-center w-8 h-8 rounded-lg text-lg',
                iconBg
            ]}
            aria-hidden="true"
        >
            {icon}
        </span>
        <div class="flex-1 min-w-0">
            {displayTitle && (
                <p class:list={['font-semibold text-sm mb-1', titleColor]}>
                    {displayTitle}
                </p>
            )}
            <div class:list={[
                'callout-content text-foreground-secondary [&>p]:m-0 [&>p:not(:last-child)]:mb-2',
                type === 'quote' ? 'text-base' : 'text-sm'
            ]}>
                <slot />
            </div>
        </div>
    </div>
</aside>
